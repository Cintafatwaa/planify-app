{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import IconPlanify from'../assets/logo.png';import Create from'../pages/create';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[events,setEvents]=useState([]);const[editingEvent,setEditingEvent]=useState(null);const[loading,setLoading]=useState(true);// Fetch data from db.json\nuseEffect(()=>{fetch('http://localhost:5000/events').then(response=>response.json()).then(data=>{setEvents(data);setLoading(false);}).catch(error=>{console.error('Error loading data:',error);setLoading(false);});},[]);// Save event (update or add)\nconst handleSaveEvent=newEvent=>{setLoading(true);if(editingEvent){// Update event\nconsole.log('Updating event with ID:',newEvent.id);// Log ID for debugging\nfetch(\"http://localhost:5000/events/\".concat(newEvent.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(newEvent)}).then(response=>{if(!response.ok){throw new Error('Failed to update event');}return response.json();}).then(updatedEvent=>{setEvents(prev=>prev.map(event=>event.id===newEvent.id?updatedEvent:event));setEditingEvent(null);setLoading(false);}).catch(error=>{console.error('Error updating event:',error);setLoading(false);});}else{// Add new event\nfetch('http://localhost:5000/events',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newEvent)}).then(response=>response.json()).then(createdEvent=>{setEvents(prev=>[...prev,createdEvent]);setLoading(false);}).catch(error=>{console.error('Error adding event:',error);setLoading(false);});}};// Delete event\nconst handleDeleteEvent=id=>{console.log('Deleting event with ID:',id);// Log ID for debugging\nfetch(\"http://localhost:5000/events/\".concat(id),{method:'DELETE'}).then(()=>{console.log('Event deleted successfully');setEvents(prev=>prev.filter(event=>event.id!==id));}).catch(error=>console.error('Error deleting event:',error));};// Edit event\nconst handleEditEvent=event=>{setEditingEvent(event);};if(loading){return/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Memuat data...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4 p-4 border-b border-gray-300\",children:/*#__PURE__*/_jsx(Link,{to:\"/beranda\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"icon-planify\",src:IconPlanify,className:\"w-32\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold p-4\",children:\"Form\"}),/*#__PURE__*/_jsx(Create,{onSave:handleSaveEvent,editingEvent:editingEvent}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Daftar Acara\"}),/*#__PURE__*/_jsx(\"ul\",{children:events.map(event=>/*#__PURE__*/_jsxs(\"li\",{className:\"border p-4 rounded mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:event.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Waktu: \",event.time]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:event.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditEvent(event),className:\"px-2 py-1 bg-yellow-500 text-white rounded\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteEvent(event.id),className:\"px-2 py-1 bg-red-500 text-white rounded\",children:\"Hapus\"})]})]},event.id))})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","IconPlanify","Create","jsx","_jsx","jsxs","_jsxs","Dashboard","events","setEvents","editingEvent","setEditingEvent","loading","setLoading","fetch","then","response","json","data","catch","error","console","handleSaveEvent","newEvent","log","id","concat","method","headers","body","JSON","stringify","ok","Error","updatedEvent","prev","map","event","createdEvent","handleDeleteEvent","filter","handleEditEvent","className","children","to","alt","src","onSave","name","time","description","onClick"],"sources":["C:/Users/Windows/OneDrive/Dokumen/GitHub/planify/src/pages/dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport IconPlanify from '../assets/logo.png';\r\nimport Create from '../pages/create';\r\n\r\nfunction Dashboard() {\r\n    const [events, setEvents] = useState([]);\r\n    const [editingEvent, setEditingEvent] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Fetch data from db.json\r\n    useEffect(() => {\r\n        fetch('http://localhost:5000/events')\r\n          .then((response) => response.json())\r\n          .then((data) => {\r\n            setEvents(data);\r\n            setLoading(false);\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error loading data:', error);\r\n            setLoading(false);\r\n          });\r\n      }, []);\r\n\r\n    // Save event (update or add)\r\n    const handleSaveEvent = (newEvent) => {\r\n        setLoading(true);\r\n        if (editingEvent) {\r\n            // Update event\r\n            console.log('Updating event with ID:', newEvent.id);  // Log ID for debugging\r\n            fetch(`http://localhost:5000/events/${newEvent.id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(newEvent),\r\n            })\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    throw new Error('Failed to update event');\r\n                }\r\n                return response.json();\r\n            })\r\n            .then((updatedEvent) => {\r\n                setEvents((prev) =>\r\n                    prev.map((event) => (event.id === newEvent.id ? updatedEvent : event))\r\n                );\r\n                setEditingEvent(null);\r\n                setLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error updating event:', error);\r\n                setLoading(false);\r\n            });\r\n        } else {\r\n            // Add new event\r\n            fetch('http://localhost:5000/events', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(newEvent),\r\n            })\r\n            .then((response) => response.json())\r\n            .then((createdEvent) => {\r\n                setEvents((prev) => [...prev, createdEvent]);\r\n                setLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error adding event:', error);\r\n                setLoading(false);\r\n            });\r\n        }\r\n    };\r\n\r\n    // Delete event\r\n    const handleDeleteEvent = (id) => {\r\n        console.log('Deleting event with ID:', id);  // Log ID for debugging\r\n        fetch(`http://localhost:5000/events/${id}`, { method: 'DELETE' })\r\n            .then(() => {\r\n                console.log('Event deleted successfully');\r\n                setEvents((prev) => prev.filter((event) => event.id !== id));\r\n            })\r\n            .catch((error) => console.error('Error deleting event:', error));\r\n    };\r\n\r\n    // Edit event\r\n    const handleEditEvent = (event) => {\r\n        setEditingEvent(event);\r\n    };\r\n\r\n    if (loading) {\r\n        return <p className=\"text-center\">Memuat data...</p>;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className='flex items-center space-x-4 p-4 border-b border-gray-300'>\r\n                <Link to='/beranda'>\r\n                    <img alt=\"icon-planify\" src={IconPlanify} className=\"w-32\" />\r\n                </Link>\r\n            </div>\r\n\r\n            <h1 className=\"text-2xl font-bold p-4\">Form</h1>\r\n            <Create onSave={handleSaveEvent} editingEvent={editingEvent} />\r\n            <div className=\"mt-8\">\r\n                <h2 className=\"text-xl font-semibold mb-4\">Daftar Acara</h2>\r\n                <ul>\r\n                    {events.map((event) => (\r\n                        <li key={event.id} className=\"border p-4 rounded mb-2\">\r\n                            <h3 className=\"text-lg font-semibold\">{event.name}</h3>\r\n                            <p className=\"text-sm text-gray-600\">Waktu: {event.time}</p>\r\n                            <p className=\"text-sm\">{event.description}</p>\r\n                            <div className=\"space-x-2 mt-2\">\r\n                                <button\r\n                                    onClick={() => handleEditEvent(event)}\r\n                                    className=\"px-2 py-1 bg-yellow-500 text-white rounded\">\r\n                                    Edit\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => handleDeleteEvent(event.id)}\r\n                                    className=\"px-2 py-1 bg-red-500 text-white rounded\">\r\n                                    Hapus\r\n                                </button>\r\n                            </div>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}